{
  "$schema": "https://railway.app/railway.schema.json",
  "name": "Render Video API",
  "description": "Open-source JSON-to-Video API for rendering longform videos by merging backgrounds and audio files",
  "services": [
    {
      "name": "web-api",
      "source": ".",
      "buildCommand": "npm run build && npm run prisma:generate",
      "startCommand": "npm start"
    },
    {
      "name": "worker",
      "source": ".",
      "buildCommand": "npm run build && npm run prisma:generate",
      "startCommand": "npm run start:worker"
    }
  ],
  "plugins": [
    {
      "name": "postgres",
      "type": "postgresql"
    },
    {
      "name": "bucket",
      "type": "bucket"
    }
  ],
  "variables": {
    "JWT_SECRET": {
      "description": "Auto-generated secret for JWT token signing",
      "generator": {
        "type": "secret"
      }
    },
    "CORS_ORIGINS": {
      "description": "CORS allowed origins",
      "default": "*"
    },
    "RAILWAY_BUCKET_REGION": {
      "description": "Railway Bucket region",
      "default": "us-east-1"
    }
  }
}

